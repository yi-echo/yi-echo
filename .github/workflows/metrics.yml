name: Generate GitHub Metrics (Terminal)

on:
  schedule:
    - cron: "0 0 * * *" # 每天凌晨自动更新
  workflow_dispatch: # 支持手动触发

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 📟 Generate GitHub Metrics (Terminal Style)
        uses: lowlighter/metrics@latest
        with:
          # 🔑 GitHub Personal Access Token (PAT)
          token: ${{ secrets.METRICS_TOKEN }}

          # 👤 用户名
          user: yi-echo

          # 🧩 模板与输出文件
          template: terminal
          filename: github-metrics.svg

          # ⚙️ 基础模块（头部 + 仓库统计 + 元数据）
          base: header, metadata

          # 🕒 时区（建议保持一致）
          config_timezone: Asia/Shanghai

          # 🚀 优化选项（建议加上）
          use_prebuilt_image: yes  # ✅ 使用预构建镜像，加快构建速度
          optimize: yes            # ✅ 优化 SVG 文件体积
          clean_workflows: yes     # ✅ 自动清理旧缓存文件
          config_padding: 0       # ✅ 去掉内边距
          config_display: large   # ✅ 防止额外留白
